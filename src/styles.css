
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    :root { --bg-dark: #0a0a0f; --safe-top: env(safe-area-inset-top, 20px); --safe-bottom: env(safe-area-inset-bottom, 20px); --nav-height: calc(60px + env(safe-area-inset-bottom, 20px)); }
    html, body { height: 100%; width: 100%; overflow: hidden; font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg-dark); color: #ffffff; position: fixed; }
    .screen { height: 100%; width: 100%; display: none; flex-direction: column; overflow: hidden; position: absolute; top: 0; left: 0; }
    .screen.active { display: flex; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes checkPop { 0% { transform: scale(1); } 30% { transform: scale(1.3); } 60% { transform: scale(0.9); } 100% { transform: scale(1); } }
    .animate-in { animation: slideIn 0.3s ease forwards; }
    .delay-1 { animation-delay: 0.05s; opacity: 0; }
    .delay-2 { animation-delay: 0.1s; opacity: 0; }
    .delay-3 { animation-delay: 0.15s; opacity: 0; }
    #home-screen { padding: calc(var(--safe-top) + 20px) 20px var(--nav-height); background: #0a0a0f; overflow-y: auto; }
    .home-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; }
    .greeting h1 { font-size: 32px; font-weight: 800; margin-bottom: 4px; }
    .greeting p { font-size: 16px; color: rgba(255,255,255,0.5); font-weight: 500; }
    .signout-btn { padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; color: rgba(255,255,255,0.4); cursor: pointer; transition: all 0.2s ease; }
    .signout-btn:hover { background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.6); }
    .signout-btn:active { transform: scale(0.95); }
    .room-card { margin-bottom: 16px; background: rgba(255,255,255,0.03); border-radius: 20px; border: 1px solid rgba(255,255,255,0.06); display: flex; align-items: center; transition: all 0.2s ease; }
    .room-card-main { flex: 1; padding: 24px; cursor: pointer; display: flex; align-items: center; gap: 16px; }
    .room-card-main:active { background: rgba(255,255,255,0.02); border-radius: 20px 0 0 20px; }
    .room-card .info h2 { font-size: 24px; font-weight: 700; margin-bottom: 4px; }
    .room-card .info p { font-size: 14px; color: rgba(255,255,255,0.4); font-weight: 500; }
    .room-card .arrow { margin-left: auto; color: rgba(255,255,255,0.3); }
    .room-more-btn { padding: 24px 20px; cursor: pointer; color: rgba(255,255,255,0.3); opacity: 0.6; transition: opacity 0.2s ease; }
    .room-more-btn:hover { opacity: 1; }
    .room-menu-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 99; }
    
    /* Add room button */
    .add-room-btn { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 24px; margin-bottom: 16px; background: rgba(255,255,255,0.02); border-radius: 20px; border: 1px dashed rgba(255,255,255,0.1); cursor: pointer; opacity: 0.6; transition: all 0.2s ease; }
    .add-room-btn:hover { opacity: 1; background: rgba(255,255,255,0.04); }
    .add-room-btn .plus { color: rgba(255,255,255,0.5); font-size: 18px; font-weight: 600; }
    .add-room-btn .text { color: rgba(255,255,255,0.4); font-size: 16px; font-weight: 500; }
    
    .logo { text-align: center; padding: 40px 20px; }
    .logo span { font-size: 14px; font-weight: 700; color: rgba(255,255,255,0.15); letter-spacing: 2px; }
    #room-screen { padding: calc(var(--safe-top) + 12px) 16px var(--nav-height); background: #0a0a0f; overflow: hidden; }
    .header { display: flex; align-items: center; gap: 12px; margin-bottom: 24px; }
    .back-btn { padding: 10px 16px; background: rgba(255,255,255,0.05); border-radius: 12px; border: 1px solid rgba(255,255,255,0.08); cursor: pointer; display: flex; align-items: center; gap: 8px; color: rgba(255,255,255,0.6); font-size: 14px; font-weight: 600; font-family: inherit; }
    .back-btn:active { background: rgba(255,255,255,0.1); }
    .room-title { display: flex; align-items: center; gap: 12px; margin-bottom: 24px; }
    .room-title h1 { font-size: 32px; font-weight: 800; }
    .cubbies-list { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; padding-bottom: 40px; }
    .cubby-card { padding: 20px 24px; border-radius: 16px; cursor: pointer; display: flex; align-items: center; gap: 16px; transition: all 0.2s ease; }
    .cubby-card:active { transform: scale(0.98); }
    .cubby-card .name { font-size: 20px; font-weight: 700; }
    .cubby-card .arrow { margin-left: auto; }
    #cubby-screen { padding: calc(var(--safe-top) + 12px) 16px var(--nav-height); overflow: hidden; }
    .cubby-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
    .cubby-header .back-btn { background: var(--cubby-card); border-color: var(--cubby-border); color: var(--cubby-text); }
    .new-task-btn { margin-left: auto; padding: 10px 16px; background: var(--cubby-card); border-radius: 12px; border: 1px solid var(--cubby-border); cursor: pointer; display: flex; align-items: center; gap: 8px; font-family: inherit; }
    .new-task-btn .plus { color: var(--cubby-primary); font-size: 16px; font-weight: 700; }
    .new-task-btn .text { color: var(--cubby-text); font-size: 14px; font-weight: 600; }
    .cubby-title { display: flex; align-items: center; gap: 12px; margin-bottom: 24px; }
    .cubby-title h1 { font-size: 36px; font-weight: 800; color: var(--cubby-text); }
    .tasks-container { flex: 1; overflow-y: auto; padding-bottom: 40px; }
    .subcubby { margin-bottom: 24px; }
    .subcubby-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; cursor: pointer; user-select: none; }
    .subcubby-header .chevron { transition: transform 0.3s ease; color: var(--cubby-primary); }
    .subcubby-header.collapsed .chevron { transform: rotate(0deg); }
    .subcubby-header.expanded .chevron { transform: rotate(90deg); }
    .subcubby-header h3 { font-size: 14px; font-weight: 700; color: var(--cubby-primary); text-transform: uppercase; letter-spacing: 0.5px; }
    .subcubby-header .count { font-size: 12px; color: var(--cubby-text-muted); font-weight: 500; }
    .subcubby-tasks { display: grid; grid-template-rows: 0fr; transition: grid-template-rows 0.3s ease, opacity 0.3s ease; opacity: 0; }
    .subcubby-tasks.visible { grid-template-rows: 1fr; opacity: 1; }
    .subcubby-tasks-inner { overflow: hidden; }
    .task { display: flex; align-items: center; gap: 12px; padding: 14px 16px; margin-bottom: 8px; background: var(--cubby-card); border-radius: 12px; border: 1px solid transparent; transition: all 0.2s ease; }
    .task.expanded { background: var(--cubby-card-hover); border-color: var(--cubby-border); }
    .task.completed-task { background: rgba(0,0,0,0.3); opacity: 0.6; }
    .task.task-overdue { border-color: rgba(255, 107, 107, 0.5); }
    .task.subtask { padding: 10px 14px; margin-left: 32px; position: relative; }
    .task.subtask::before { content: ''; position: absolute; left: -20px; top: 50%; width: 16px; height: 2px; background: var(--cubby-border); }
    .checkbox { width: 24px; height: 24px; min-width: 24px; border-radius: 6px; border: 2px solid var(--cubby-border); background: rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; }
    .checkbox.small { width: 20px; height: 20px; min-width: 20px; }
    .checkbox.checked { background: var(--cubby-primary); border-color: var(--cubby-primary); box-shadow: 0 0 12px var(--cubby-glow); }
    .checkbox.pop { animation: checkPop 0.3s ease; }
    .checkbox svg { display: none; }
    .checkbox.checked svg { display: block; }
    .task-text { flex: 1; font-size: 16px; font-weight: 500; color: var(--cubby-text); transition: all 0.3s ease; }
    .task.subtask .task-text { font-size: 14px; }
    .task-text.completed { text-decoration: line-through; color: var(--cubby-text-muted); }
    .expand-btn { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border-radius: 6px; background: var(--cubby-card); cursor: pointer; transition: transform 0.2s ease; }
    .expand-btn.expanded { transform: rotate(90deg); }
    .expand-btn svg { color: var(--cubby-text); }
    .more-btn { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
    .more-btn svg { color: var(--cubby-text-muted); }
    .subtasks-container { position: relative; margin-left: 12px; display: none; }
    .subtasks-container.visible { display: block; }
    .subtasks-container::before { content: ''; position: absolute; left: 8px; top: 0; bottom: 8px; width: 2px; background: var(--cubby-border); border-radius: 1px; }
    .add-task-btn { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: transparent; border-radius: 12px; border: 1px dashed var(--cubby-border); cursor: pointer; }
    .add-task-btn .plus { color: var(--cubby-primary); font-size: 18px; font-weight: 600; }
    .add-task-btn .text { color: var(--cubby-text-muted); font-size: 14px; font-weight: 500; }
    
    /* Modal styles */
    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; z-index: 1000; }
    .modal.active { display: block; }
    .modal-backdrop { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); }
    .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1a1a24; border-radius: 20px; padding: 24px; width: calc(100% - 40px); max-width: 400px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
    .modal-content h2 { font-size: 20px; font-weight: 700; color: #fff; margin-bottom: 16px; }
    .modal-content input { width: 100%; padding: 14px 16px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 12px; color: #fff; font-size: 16px; font-family: inherit; outline: none; transition: border-color 0.2s ease; }
    .modal-content input:focus { border-color: rgba(255,255,255,0.3); }
    .modal-content input::placeholder { color: rgba(255,255,255,0.3); }
    .modal-buttons { display: flex; gap: 12px; margin-top: 20px; }
    .modal-btn { flex: 1; padding: 14px; border-radius: 12px; font-size: 16px; font-weight: 600; font-family: inherit; cursor: pointer; transition: all 0.2s ease; }
    .modal-btn.cancel { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.6); }
    .modal-btn.cancel:active { background: rgba(255,255,255,0.1); }
    .modal-btn.confirm { background: #5B8EFF; border: none; color: #fff; }
    .modal-btn.confirm:active { background: #4a7de8; }
    
    /* Add subtask button */
    .add-subtask-btn { display: flex; align-items: center; gap: 8px; padding: 8px 12px; margin-left: 32px; margin-top: 4px; margin-bottom: 12px; background: transparent; border-radius: 8px; border: 1px dashed var(--cubby-border); cursor: pointer; opacity: 0.7; transition: opacity 0.2s ease; }
    .add-subtask-btn:hover { opacity: 1; }
    .add-subtask-btn .plus { color: var(--cubby-primary); font-size: 14px; font-weight: 600; }
    .add-subtask-btn .text { color: var(--cubby-text-muted); font-size: 12px; font-weight: 500; }
    
    /* Kebab menu */
    .task-menu { position: fixed; background: #1a1a24; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 10px 40px rgba(0,0,0,0.5); z-index: 100; min-width: 160px; overflow: hidden; display: none; }
    .task-menu.active { display: block; }
    .task-menu-item { display: flex; align-items: center; gap: 10px; padding: 12px 16px; font-size: 14px; font-weight: 500; color: rgba(255,255,255,0.8); cursor: pointer; transition: background 0.15s ease; }
    .task-menu-item:hover { background: rgba(255,255,255,0.05); }
    .task-menu-item svg { width: 16px; height: 16px; opacity: 0.6; }
    .task-menu-item.delete { color: #ff6b6b; }
    .task-menu-item.delete:hover { background: rgba(255,107,107,0.1); }
    .task-menu-item.delete svg { color: #ff6b6b; opacity: 0.8; }
    .task-menu-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 99; }
    
    /* Move modal */
    .move-modal-content { max-height: 70vh; display: flex; flex-direction: column; }
    .move-options { flex: 1; overflow-y: auto; margin: 0 -24px; padding: 0 24px; max-height: 300px; }
    .move-option { padding: 12px 16px; margin-bottom: 8px; background: rgba(255,255,255,0.03); border-radius: 10px; cursor: pointer; transition: background 0.15s ease; }
    .move-option:hover { background: rgba(255,255,255,0.08); }
    .move-path { display: block; font-size: 12px; color: rgba(255,255,255,0.4); margin-bottom: 2px; }
    .move-subcubby { display: block; font-size: 15px; font-weight: 600; color: rgba(255,255,255,0.9); }
    
    /* Subcubby header layout */
    .subcubby-header { display: flex; align-items: center; justify-content: space-between; }
    .subcubby-header-left { display: flex; align-items: center; gap: 8px; flex: 1; cursor: pointer; }
    .subcubby-more-btn { padding: 8px; cursor: pointer; opacity: 0.5; transition: opacity 0.2s ease; }
    .subcubby-more-btn:hover { opacity: 1; }
    .subcubby-menu-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 99; }
    
    /* Add subcubby button */
    .add-subcubby-btn { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 16px; margin-top: 16px; background: rgba(255,255,255,0.03); border-radius: 12px; border: 1px dashed var(--cubby-border); cursor: pointer; opacity: 0.6; transition: all 0.2s ease; }
    .add-subcubby-btn:hover { opacity: 1; background: rgba(255,255,255,0.05); }
    .add-subcubby-btn .plus { color: var(--cubby-primary); font-size: 16px; font-weight: 600; }
    .add-subcubby-btn .text { color: var(--cubby-text-muted); font-size: 14px; font-weight: 500; }
    
    /* Cubby card layout */
    .cubby-card { display: flex; align-items: center; position: relative; }
    .cubby-card-main { display: flex; align-items: center; justify-content: space-between; flex: 1; padding: 20px 24px; cursor: pointer; }
    .cubby-more-btn { padding: 20px 16px; cursor: pointer; opacity: 0.5; transition: opacity 0.2s ease; }
    .cubby-more-btn:hover { opacity: 1; }
    .cubby-menu-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 99; }
    
    /* Add cubby button */
    .add-cubby-btn { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 20px; margin-top: 12px; background: rgba(255,255,255,0.03); border-radius: 16px; border: 1px dashed rgba(255,255,255,0.15); cursor: pointer; opacity: 0.6; transition: all 0.2s ease; }
    .add-cubby-btn:hover { opacity: 1; background: rgba(255,255,255,0.05); }
    .add-cubby-btn .plus { color: rgba(255,255,255,0.6); font-size: 18px; font-weight: 600; }
    .add-cubby-btn .text { color: rgba(255,255,255,0.4); font-size: 15px; font-weight: 500; }
    
    /* Color picker modal */
    .color-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 16px 0; }
    .color-option { padding: 16px; border-radius: 12px; cursor: pointer; text-align: center; font-weight: 600; transition: transform 0.15s ease, box-shadow 0.15s ease; }
    .color-option:hover { transform: scale(1.02); }
    .color-option.selected { box-shadow: 0 0 0 3px rgba(255,255,255,0.5); }
    
    /* Task layout */
    .task { display: flex; align-items: center; }
    .subcubby-header { display: flex; align-items: center; }
    
    /* Due date styles */
    .task-due-date { font-size: 11px; font-weight: 600; padding: 3px 8px; border-radius: 6px; margin-left: auto; margin-right: 8px; white-space: nowrap; }
    .task-due-date.overdue { background: rgba(255, 107, 107, 0.2); color: #ff6b6b; }
    .task-due-date.today, .task-due-date.due-today { background: rgba(255, 255, 255, 0.15); color: #ffffff; }
    .task-due-date.tomorrow { background: rgba(254, 202, 87, 0.2); color: #feca57; }
    .task-due-date.upcoming, .task-due-date.due-soon { background: rgba(91, 142, 255, 0.2); color: #5B8EFF; }
    .task-due-date.future, .task-due-date.due-later { background: rgba(255, 255, 255, 0.08); color: rgba(255, 255, 255, 0.5); }
    .task.completed-task .task-due-date { opacity: 0.5; }
    
    /* Tag styles */
    .task-tags { display: flex; flex-wrap: wrap; gap: 4px; margin-left: auto; margin-right: 8px; }
    .task-tag { font-size: 10px; font-weight: 600; padding: 2px 8px; border-radius: 10px; white-space: nowrap; text-transform: lowercase; }
    .task-tag.tag-red { background: rgba(255, 107, 107, 0.25); color: #ff6b6b; }
    .task-tag.tag-orange { background: rgba(255, 159, 67, 0.25); color: #ff9f43; }
    .task-tag.tag-yellow { background: rgba(254, 202, 87, 0.25); color: #feca57; }
    .task-tag.tag-green { background: rgba(46, 213, 115, 0.25); color: #2ed573; }
    .task-tag.tag-blue { background: rgba(91, 142, 255, 0.25); color: #5B8EFF; }
    .task-tag.tag-purple { background: rgba(165, 94, 234, 0.25); color: #a55eea; }
    .task-tag.tag-pink { background: rgba(255, 107, 181, 0.25); color: #ff6bb5; }
    .task-tag.tag-gray { background: rgba(255, 255, 255, 0.15); color: rgba(255, 255, 255, 0.7); }
    .task.completed-task .task-tag { opacity: 0.5; }
    .task.subtask .task-tags { margin-left: 0; }
    
    /* Task meta container - holds tags and due date */
    .task-meta { display: flex; align-items: center; gap: 6px; margin-left: auto; margin-right: 8px; }
    .task-meta .task-tags { margin: 0; }
    .task-meta .task-due-date { margin: 0; }
    
    /* Tags input in modal */
    .tags-row { margin-top: 12px; }
    .tags-row label { display: block; font-size: 14px; color: rgba(255,255,255,0.6); font-weight: 500; margin-bottom: 8px; }
    .tags-input-container { display: flex; flex-wrap: wrap; gap: 6px; padding: 10px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 10px; min-height: 44px; align-items: center; }
    .tags-input-container:focus-within { border-color: rgba(255,255,255,0.3); }
    .tags-input-container .tag-pill { display: flex; align-items: center; gap: 4px; font-size: 12px; font-weight: 600; padding: 4px 8px; border-radius: 8px; cursor: default; }
    .tags-input-container .tag-pill .remove-tag { cursor: pointer; opacity: 0.6; font-size: 14px; line-height: 1; margin-left: 2px; }
    .tags-input-container .tag-pill .remove-tag:hover { opacity: 1; }
    .tags-input-container input { flex: 1; min-width: 80px; background: transparent; border: none; color: #fff; font-size: 14px; font-family: inherit; outline: none; padding: 4px 0; }
    .tags-input-container input::placeholder { color: rgba(255,255,255,0.3); }
    
    /* Tag color picker */
    .tag-colors { display: flex; gap: 6px; margin-top: 8px; }
    .tag-color-btn { width: 24px; height: 24px; border-radius: 50%; cursor: pointer; border: 2px solid transparent; transition: transform 0.15s ease, border-color 0.15s ease; }
    .tag-color-btn:hover { transform: scale(1.1); }
    .tag-color-btn.selected { border-color: rgba(255,255,255,0.8); }
    
    /* Date input in modal */
    .modal-content .date-row { display: flex; align-items: center; gap: 12px; margin-top: 12px; }
    .modal-content .date-row label { font-size: 14px; color: rgba(255,255,255,0.6); font-weight: 500; white-space: nowrap; }
    .modal-content input[type="date"] { flex: 1; padding: 10px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 10px; color: #fff; font-size: 14px; font-family: inherit; outline: none; transition: border-color 0.2s ease; }
    .modal-content input[type="date"]:focus { border-color: rgba(255,255,255,0.3); }
    .modal-content input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); opacity: 0.6; cursor: pointer; }
    .clear-date-btn { padding: 8px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: rgba(255,255,255,0.5); font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.2s ease; }
    .clear-date-btn:hover { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); }
/* ============================================ */
/* SEARCH STYLES */
/* ============================================ */

/* Search button on home screen */
.search-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    padding: 16px 20px;
    margin-bottom: 24px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    cursor: pointer;
    font-family: inherit;
    font-size: 15px;
    color: rgba(255,255,255,0.4);
    font-weight: 500;
    transition: all 0.2s ease;
}
.search-btn:hover {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.12);
}
.search-btn svg {
    opacity: 0.5;
}
.search-btn span:first-of-type {
    flex: 1;
    text-align: left;
}
.search-shortcut {
    font-size: 12px;
    padding: 4px 8px;
    background: rgba(255,255,255,0.06);
    border-radius: 6px;
    color: rgba(255,255,255,0.3);
}

/* Search modal */
#search-modal .modal-backdrop {
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(8px);
}

.search-modal-content {
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 560px;
    max-height: 75vh;
    background: #151518;
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,0.1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 101;
}

@keyframes searchSlideIn {
    from { opacity: 0; transform: translateX(-50%) translateY(-10px); }
    to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

.search-modal-content {
    animation: searchSlideIn 0.2s ease;
}

.search-header {
    padding: 16px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
}

.search-input-wrapper {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.08);
}

.search-input-wrapper:focus-within {
    border-color: rgba(255,255,255,0.2);
    background: rgba(255,255,255,0.07);
}

.search-icon {
    opacity: 0.4;
    flex-shrink: 0;
}

#search-input {
    flex: 1;
    background: none;
    border: none;
    outline: none;
    color: #fff;
    font-size: 16px;
    font-family: inherit;
    font-weight: 500;
}

#search-input::placeholder {
    color: rgba(255,255,255,0.3);
}

.search-clear-btn {
    background: rgba(255,255,255,0.1);
    border: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    color: rgba(255,255,255,0.5);
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.search-clear-btn:hover {
    background: rgba(255,255,255,0.15);
}

/* Search filters */
.search-filters {
    display: flex;
    gap: 8px;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    overflow-x: auto;
    flex-shrink: 0;
    -webkit-overflow-scrolling: touch;
}

.filter-btn {
    padding: 8px 14px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 20px;
    color: rgba(255,255,255,0.5);
    font-size: 13px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    white-space: nowrap;
    flex-shrink: 0;
    transition: all 0.2s ease;
}

.filter-btn:hover {
    background: rgba(255,255,255,0.08);
}

.filter-btn.active {
    border-color: currentColor;
}

/* Color-coded filter buttons */
.filter-btn[data-filter="all"] { color: rgba(255,255,255,0.5); }
.filter-btn[data-filter="all"].active { background: rgba(255,255,255,0.12); color: #fff; }

.filter-btn[data-filter="active"] { color: #5B8EFF; }
.filter-btn[data-filter="active"].active { background: rgba(91, 142, 255, 0.2); color: #5B8EFF; }

.filter-btn[data-filter="completed"] { color: #5AE890; }
.filter-btn[data-filter="completed"].active { background: rgba(90, 232, 144, 0.2); color: #5AE890; }

.filter-btn[data-filter="due-soon"] { color: #feca57; }
.filter-btn[data-filter="due-soon"].active { background: rgba(254, 202, 87, 0.2); color: #feca57; }

.filter-btn[data-filter="overdue"] { color: #ff6b6b; }
.filter-btn[data-filter="overdue"].active { background: rgba(255, 107, 107, 0.2); color: #ff6b6b; }

/* Search results */
.search-results {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.search-empty {
    padding: 40px 20px;
    text-align: center;
    color: rgba(255,255,255,0.3);
    font-size: 14px;
}

.search-group {
    margin-bottom: 16px;
}

.search-group-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.search-group-count {
    background: currentColor;
    color: #151518;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
}

.search-result-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.search-result-item:hover {
    background: rgba(255,255,255,0.05);
}

.search-result-item.completed {
    opacity: 0.5;
}

.search-result-check {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 2px solid;
    flex-shrink: 0;
    margin-top: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.search-result-check.checked {
    border-color: transparent !important;
}

.search-result-content {
    flex: 1;
    min-width: 0;
}

.search-result-subtask-indicator {
    color: rgba(255,255,255,0.3);
    margin-right: 6px;
}

.search-result-text {
    font-size: 14px;
    font-weight: 500;
    color: #fff;
    word-break: break-word;
}

.search-result-item.completed .search-result-text {
    text-decoration: line-through;
    color: rgba(255,255,255,0.5);
}

.search-result-text mark {
    background: rgba(255, 200, 50, 0.3);
    color: inherit;
    border-radius: 2px;
    padding: 0 2px;
}

.search-result-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 6px;
}

.search-result-tag {
    font-size: 11px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 6px;
}

.search-result-due {
    font-size: 11px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 6px;
    background: rgba(255,255,255,0.08);
    color: rgba(255,255,255,0.6);
}

.search-result-due.overdue {
    background: rgba(255, 90, 90, 0.2);
    color: #ff6b6b;
}

.search-result-due.due-today {
    background: rgba(255, 159, 67, 0.2);
    color: #ff9f43;
}

.search-result-due.due-soon {
    background: rgba(254, 202, 87, 0.2);
    color: #feca57;
}

.search-result-location {
    font-size: 11px;
    color: rgba(255,255,255,0.3);
    flex-shrink: 0;
    margin-top: 3px;
}

/* Search highlight animation */
@keyframes highlightPulse {
    0%, 100% { box-shadow: 0 0 0 0 transparent; }
    50% { box-shadow: 0 0 0 4px var(--cubby-glow, rgba(179, 102, 255, 0.4)); }
}

.search-highlight {
    animation: highlightPulse 0.5s ease 3;
    background: var(--cubby-card-hover) !important;
}

/* Header search button (Room & Cubby screens) */
.header-search-btn {
    padding: 10px;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.08);
    cursor: pointer;
    color: rgba(255,255,255,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}
.header-search-btn:hover {
    background: rgba(255,255,255,0.08);
    color: rgba(255,255,255,0.7);
}
.cubby-header .header-search-btn {
    background: var(--cubby-card);
    border-color: var(--cubby-border);
    color: var(--cubby-text-muted);
}
.cubby-header .header-search-btn:hover {
    background: var(--cubby-card-hover);
    color: var(--cubby-text);
}

/* ============================================ */
/* CUSTOM SCROLLBAR STYLES */
/* ============================================ */

/* Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
}

/* Cubby screen scrollbar - uses theme color */
#cubby-screen::-webkit-scrollbar-thumb,
#cubby-screen .tasks-container::-webkit-scrollbar-thumb {
    background: var(--cubby-primary, rgba(255,255,255,0.15));
}

/* Firefox scrollbar */
* {
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.15) transparent;
}

#cubby-screen,
#cubby-screen .tasks-container {
    scrollbar-color: var(--cubby-primary) transparent;
}

/* Add right padding to scrollable containers for scrollbar spacing */
#home-screen {
    padding-right: 28px;
}

#room-screen .cubbies-list {
    padding-right: 12px;
}

#cubby-screen .tasks-container {
    padding-right: 12px;
}

.search-results {
    padding-right: 12px;
}

/* ============================================ */
/* SUBTASK COUNTER STYLES */
/* ============================================ */

.subtask-counter {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background: var(--cubby-card);
    border: 1px solid var(--cubby-border);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.subtask-counter:hover {
    background: var(--cubby-card-hover);
}

.subtask-count {
    font-size: 12px;
    font-weight: 600;
    color: var(--cubby-text-muted);
}

.subtask-counter.all-complete {
    background: rgba(90, 232, 144, 0.15);
    border-color: rgba(90, 232, 144, 0.3);
}

.subtask-counter.all-complete .subtask-count {
    color: #5AE890;
}

/* Adjust task layout when has subtasks */
.task.has-subtasks {
    /* marker class */
}

/* ============================================ */
/* TASK PROGRESS BAR */
/* ============================================ */

.task-progress {
    width: 48px;
    height: 6px;
    background: rgba(255,255,255,0.08);
    border-radius: 3px;
    overflow: hidden;
    flex-shrink: 0;
}

.task-progress-fill {
    height: 100%;
    background: var(--cubby-primary);
    border-radius: 3px;
    transition: width 0.3s ease;
    opacity: 0.7;
}

.task-progress-fill.complete {
    background: #5AE890;
    opacity: 1;
}

/* ============================================ */
/* TASK MEMO STYLES */
/* ============================================ */

/* Memo indicator icon on task row */
.memo-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    color: var(--cubby-text-muted);
    opacity: 0.5;
}

/* Memo display in expanded area */
.task-memo-display {
    padding: 10px 14px;
    margin-left: 24px;
    margin-bottom: 8px;
    font-size: 13px;
    color: var(--cubby-text-muted);
    line-height: 1.5;
    border-left: 2px solid var(--cubby-primary);
    background: rgba(255,255,255,0.02);
    border-radius: 0 8px 8px 0;
}

/* Memo textarea in modal */
.memo-row {
    margin-top: 12px;
}

.memo-row label {
    display: block;
    font-size: 14px;
    color: rgba(255,255,255,0.6);
    font-weight: 500;
    margin-bottom: 8px;
}

.memo-row textarea {
    width: 100%;
    padding: 12px 14px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 10px;
    color: #fff;
    font-size: 14px;
    font-family: inherit;
    outline: none;
    resize: vertical;
    min-height: 60px;
    transition: border-color 0.2s ease;
}

.memo-row textarea:focus {
    border-color: rgba(255,255,255,0.3);
}

.memo-row textarea::placeholder {
    color: rgba(255,255,255,0.3);
}

/* ============================================ */
/* BUTTON PRESS EFFECTS */
/* ============================================ */

/* Generic button press effect */
.back-btn:active,
.new-task-btn:active,
.header-search-btn:active,
.search-btn:active,
.add-task-btn:active,
.add-subtask-btn:active,
.add-room-btn:active,
.add-cubby-btn:active,
.add-subcubby-btn:active,
.filter-btn:active,
.modal-btn:active {
    transform: scale(0.96);
    transition: transform 0.1s ease;
}

/* Cubby card press */
.cubby-card:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
}

/* Room card press */
.room-card-main:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
}

/* Task press effect */
.task:active:not(.expanded) {
    transform: scale(0.99);
    transition: transform 0.1s ease;
}

/* Checkbox press */
.checkbox:active {
    transform: scale(0.9);
    transition: transform 0.1s ease;
}

/* Expand button press */
.expand-btn:active {
    transform: scale(0.85) rotate(90deg);
    transition: transform 0.1s ease;
}

.expand-btn:not(.expanded):active {
    transform: scale(0.85);
}

/* Subtask counter press */
.subtask-counter:active {
    transform: scale(0.95);
    transition: transform 0.1s ease;
}

/* More/kebab button press */
.more-btn:active,
.room-more-btn:active,
.cubby-more-btn:active,
.subcubby-more-btn:active {
    transform: scale(0.85);
    transition: transform 0.1s ease;
}

/* When any task is expanded, dim other elements */
.tasks-container.has-expanded-task .subcubby-header,
.tasks-container.has-expanded-task .task:not(.expanded):not(.subtask),
.tasks-container.has-expanded-task .add-task-btn,
.tasks-container.has-expanded-task .add-subcubby-btn {
    opacity: 0.2;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

/* Keep expanded task and its subtasks fully visible */
.tasks-container.has-expanded-task .task.expanded,
.tasks-container.has-expanded-task .task.expanded + .subtasks-container,
.tasks-container.has-expanded-task .task.expanded + .subtasks-container .task.subtask,
.tasks-container.has-expanded-task .task.expanded + .subtasks-container .add-subtask-btn {
    opacity: 1;
    pointer-events: auto;
}

/* Expanded task with subtasks - just a nice border, no glow for now */
.task.expanded.has-subtasks {
    border-color: var(--cubby-primary);
}

/* Subtasks container */
.subtasks-container {
    position: relative;
    margin-left: 32px;
}

/* Vertical line on the left */
.subtasks-container::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 17px;
    width: 2px;
    background: var(--cubby-border);
}

/* Hide vertical line when there are no subtasks (only add button) */
.subtasks-container:not(:has(.task.subtask))::before {
    display: none;
}

/* Subtask styling */
.task.subtask {
    position: relative;
    margin-left: 24px;
}

/* Horizontal connector from vertical line to subtask */
.task.subtask::before {
    content: '';
    position: absolute;
    left: -24px;
    top: 50%;
    width: 20px;
    height: 2px;
    background: var(--cubby-border);
}

/* Add subtask button */
.add-subtask-btn {
    position: relative;
    margin-left: 24px;
}

/* Curved connector for add subtask button */
.add-subtask-btn::before {
    content: '';
    position: absolute;
    left: -24px;
    top: 50%;
    width: 20px;
    height: 2px;
    background: var(--cubby-border);
}

/* When no subtasks, don't show the curve either */
.subtasks-container:not(:has(.task.subtask)) .add-subtask-btn::before {
    display: none;
}

/* ============================================ */
/* BUTTON PRESS STATES (Mobile-friendly) */
/* ============================================ */

/* Room cards */
.room-card:active {
    transform: scale(0.98);
    background: rgba(255,255,255,0.06);
}

/* Cubby cards */
.cubby-card:active {
    transform: scale(0.97);
    filter: brightness(1.1);
}

/* Tasks */
.task:active {
    transform: scale(0.99);
    filter: brightness(1.15);
}

/* Checkboxes */
.checkbox:active {
    transform: scale(0.9);
}

/* Back button */
.back-btn:active {
    transform: scale(0.95);
    filter: brightness(1.2);
}

/* New task button */
.new-task-btn:active {
    transform: scale(0.95);
    filter: brightness(1.2);
}

/* Search button */
.search-btn:active {
    transform: scale(0.98);
    background: rgba(255,255,255,0.08);
}

.header-search-btn:active {
    transform: scale(0.9);
    filter: brightness(1.2);
}

/* Add buttons (new task, new subtask, new subcubby, new room, new cubby) */
.add-task-btn:active,
.add-subtask-btn:active,
.add-subcubby-btn:active,
.add-room-btn:active,
.add-cubby-btn:active {
    transform: scale(0.98);
    filter: brightness(1.2);
}

/* Expand button */
.expand-btn:active {
    transform: scale(0.85) rotate(90deg);
}

.expand-btn:not(.expanded):active {
    transform: scale(0.85);
}

/* More/kebab menu button */
.more-btn:active {
    transform: scale(0.85);
    opacity: 1;
}

/* Subcubby header */
.subcubby-header:active {
    opacity: 0.8;
}

/* Modal buttons */
.modal-btn:active {
    transform: scale(0.97);
    filter: brightness(1.1);
}

/* Filter buttons in search */
.filter-btn:active {
    transform: scale(0.95);
    filter: brightness(1.2);
}

/* Subtask counter */
.subtask-counter:active {
    transform: scale(0.95);
    filter: brightness(1.2);
}

/* Menu items */
.task-menu-item:active {
    background: rgba(255,255,255,0.1);
}

.task-menu-item.delete:active {
    background: rgba(255,107,107,0.2);
}

/* ============================================ */
/* VERSION NUMBER */
/* ============================================ */

.logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.version {
    font-size: 10px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.25);
    letter-spacing: 0.5px;
}

/* ============================================ */
/* AUTH SCREEN STYLES */
/* ============================================ */

#auth-screen {
    background: #0a0a0f;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

.auth-container {
    width: 100%;
    max-width: 360px;
    animation: slideIn 0.4s ease;
}

.auth-logo {
    font-size: 24px;
    font-weight: 800;
    letter-spacing: 3px;
    color: rgba(255, 255, 255, 0.15);
    text-align: center;
    margin-bottom: 40px;
}

.auth-title {
    font-size: 28px;
    font-weight: 700;
    color: #fff;
    margin-bottom: 32px;
    text-align: center;
}

#auth-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.auth-input-group input {
    width: 100%;
    padding: 16px 20px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 14px;
    color: #fff;
    font-size: 16px;
    font-family: inherit;
    font-weight: 500;
    outline: none;
    transition: all 0.2s ease;
}

.auth-input-group input:focus {
    border-color: rgba(255, 255, 255, 0.25);
    background: rgba(255, 255, 255, 0.08);
}

.auth-input-group input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

.auth-error {
    color: #ff6b6b;
    font-size: 14px;
    font-weight: 500;
    text-align: center;
    min-height: 20px;
}

.auth-btn {
    width: 100%;
    padding: 16px;
    background: #C77DFF;
    border: none;
    border-radius: 14px;
    color: #fff;
    font-size: 16px;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-top: 8px;
}

.auth-btn:hover {
    background: #b366e8;
}

.auth-btn:active {
    transform: scale(0.98);
}

.auth-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.auth-switch {
    text-align: center;
    margin-top: 32px;
    color: rgba(255, 255, 255, 0.5);
    font-size: 14px;
    font-weight: 500;
}

.auth-switch-btn {
    background: none;
    border: none;
    color: #C77DFF;
    font-size: 14px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    margin-left: 4px;
}

.auth-switch-btn:hover {
    text-decoration: underline;
}

/* ============================================ */
/* DRAG & DROP STYLES */
/* ============================================ */

/* Element being dragged */
.dragging {
    opacity: 0.4 !important;
    pointer-events: none;
}

/* Drag clone (the element you see moving) */
.drag-clone {
    opacity: 1 !important;
    transform: scale(1.05) !important;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.1) !important;
    cursor: grabbing !important;
    transition: transform 0.2s ease, box-shadow 0.2s ease !important;
    will-change: transform, top;
}

.drag-clone.task,
.drag-clone.subtask {
    background: var(--cubby-card-hover) !important;
    border-color: var(--cubby-border) !important;
}

.drag-clone .subcubby-tasks {
    display: none !important;
}

/* Container during drag */
.drag-active .room-card,
.drag-active .cubby-card,
.drag-active .subcubby,
.drag-active .task {
    transition: transform 0.3s cubic-bezier(0.2, 0, 0, 1) !important;
}

/* Preparing to drag */
.drag-preparing {
    cursor: grabbing;
}

/* Make draggable elements have a grab cursor on hover */
.room-card-main,
.cubby-card-main {
    cursor: grab;
    user-select: none;
    -webkit-user-select: none;
}

.subcubby-header,
.subcubby-header-left {
    cursor: grab;
    user-select: none;
    -webkit-user-select: none;
}

.task:not(.subtask),
.task.subtask {
    cursor: grab;
    user-select: none;
    -webkit-user-select: none;
}

.room-card-main:active,
.cubby-card-main:active,
.subcubby-header:active,
.subcubby-header-left:active,
.task:active {
    cursor: grabbing;
}

/* Smooth transitions for reordering */
.drag-active .room-card:not(.dragging),
.drag-active .cubby-card:not(.dragging),
.drag-active .subcubby:not(.dragging),
.drag-active .task:not(.dragging) {
    transition: transform 0.25s cubic-bezier(0.2, 0, 0, 1);
}

/* Touch feedback */
@media (hover: none) and (pointer: coarse) {
    .drag-clone {
        transform: scale(1.08) !important;
    }
}

/* ============================================ */
/* VIEWS STYLES */
/* ============================================ */

/* Views button on home screen */
.views-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    padding: 16px 20px;
    margin-bottom: 24px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    cursor: pointer;
    font-family: inherit;
    font-size: 15px;
    color: rgba(255,255,255,0.6);
    font-weight: 600;
    transition: all 0.2s ease;
}
.views-btn:hover {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.12);
}
.views-btn:active {
    transform: scale(0.98);
}
.views-btn svg {
    opacity: 0.5;
}
.views-subtitle {
    font-size: 12px;
    font-weight: 500;
    color: rgba(255,255,255,0.3);
    margin-left: auto;
}

/* Views screen */
#views-screen {
    padding: calc(var(--safe-top) + 12px) 16px var(--nav-height);
    background: #0a0a0f;
    overflow: hidden;
}
.views-title {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
}
.views-title h1 {
    font-size: 32px;
    font-weight: 800;
}
.views-container {
    flex: 1;
    overflow-y: auto;
    padding-bottom: 40px;
    padding-right: 12px;
}

/* View controls row (filters + color toggle) */
.view-controls {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 20px;
}
.view-controls .view-filters {
    margin-bottom: 0;
}

/* View color mode toggle */
.view-color-toggle {
    width: 36px;
    height: 36px;
    min-width: 36px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.15);
    background: none;
    color: rgba(255,255,255,0.35);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    -webkit-tap-highlight-color: transparent;
    flex-shrink: 0;
}
.view-color-toggle:active {
    transform: scale(0.92);
}
.view-color-toggle.active {
    color: #feca57;
    border-color: rgba(254,202,87,0.4);
    background: rgba(254,202,87,0.1);
}

/* View filter buttons */
.view-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
}
.view-filter-btn {
    padding: 6px 14px;
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,0.15);
    background: none;
    color: rgba(255,255,255,0.5);
    font-family: inherit;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    -webkit-tap-highlight-color: transparent;
}
.view-filter-btn:active {
    transform: scale(0.95);
}
.view-filter-btn.active {
    color: var(--filter-color, #fff);
    border-color: var(--filter-color, rgba(255,255,255,0.4));
    background: rgba(255,255,255,0.08);
}

/* Views empty state */
.views-empty {
    padding: 60px 20px;
    text-align: center;
    color: rgba(255,255,255,0.3);
    font-size: 15px;
    font-weight: 500;
}

/* View group */
.view-group {
    margin-bottom: 20px;
}
.view-group-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 4px;
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
}
.view-group-header:active {
    opacity: 0.8;
}
.view-group-chevron {
    transition: transform 0.2s ease;
    transform: rotate(90deg);
    flex-shrink: 0;
}
.view-group.collapsed .view-group-chevron {
    transform: rotate(0deg);
}
.view-group-label {
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.view-group-count {
    font-size: 11px;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 10px;
    color: #0a0a0f;
}

/* View task card (cubby-style) */
.view-task-card {
    margin-bottom: 6px;
}
.view-task-card .task {
    background: var(--cubby-card);
    border: 1px solid var(--cubby-border);
    border-radius: 14px;
    padding: 14px;
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative;
    transition: all 0.15s ease;
    cursor: pointer;
}
.view-task-card .task.task-overdue {
    border-color: rgba(255, 107, 107, 0.5);
}
.view-task-card .task:active {
    transform: scale(0.99);
}
.view-task-card .checkbox {
    width: 28px;
    height: 28px;
    min-width: 28px;
    border-radius: 6px;
    border: 2px solid var(--cubby-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    flex-shrink: 0;
    transition: all 0.2s ease;
}
.view-task-card .checkbox.checked {
    background: var(--cubby-primary);
    border-color: var(--cubby-primary);
}
.view-task-card .checkbox.pop {
    animation: checkPop 0.3s ease;
}
.view-task-card .checkbox svg {
    opacity: 0;
}
.view-task-card .checkbox.checked svg {
    opacity: 1;
}
.view-task-card .task-text {
    font-size: 14px;
    font-weight: 500;
    color: var(--cubby-text);
    word-break: break-word;
    min-width: 0;
    line-height: 1.1;
}
.view-task-card .task-text.completed {
    text-decoration: line-through;
    opacity: 0.4;
}
.view-task-card .task-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
    flex-shrink: 0;
}
.view-task-card .task-progress {
    width: 40px;
    height: 3px;
    background: rgba(255,255,255,0.1);
    border-radius: 2px;
    overflow: hidden;
    flex-shrink: 0;
}
.view-task-card .task-progress-fill {
    height: 100%;
    background: var(--cubby-primary);
    border-radius: 2px;
    transition: width 0.3s ease;
}
.view-task-card .subtask-counter {
    font-size: 11px;
    color: var(--cubby-text-muted);
    flex-shrink: 0;
    padding: 0;
    border: none;
    background: none;
}
.view-task-card .memo-indicator {
    color: var(--cubby-text-muted);
    flex-shrink: 0;
    display: flex;
    align-items: center;
}

/* View task text group (cubby name + task name stacked) */
.view-task-text-group {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 3px;
}
.view-task-location {
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.7;
    line-height: 1.1;
}

/* ============================================ */
/* BOTTOM NAVIGATION BAR */
/* ============================================ */

.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 50;
    display: flex;
    align-items: flex-start;
    justify-content: space-around;
    padding: 8px 8px;
    padding-bottom: calc(8px + env(safe-area-inset-bottom, 20px));
    background: rgba(10, 10, 15, 0.85);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.nav-tab {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    padding: 6px 12px;
    background: none;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    color: rgba(255, 255, 255, 0.35);
    font-family: inherit;
    font-size: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: color 0.2s ease, border-color 0.2s ease, background 0.2s ease;
    -webkit-tap-highlight-color: transparent;
}

.nav-tab svg {
    transition: color 0.2s ease;
}

/* Per-tab active colors */
.nav-tab-home.active {
    color: #6BA3FF;
    border-color: rgba(107, 163, 255, 0.4);
    background: rgba(107, 163, 255, 0.08);
}

.nav-tab-views.active {
    color: #5AF0E0;
    border-color: rgba(90, 240, 224, 0.4);
    background: rgba(90, 240, 224, 0.08);
}

.nav-tab-search.active {
    color: #C77DFF;
    border-color: rgba(199, 125, 255, 0.4);
    background: rgba(199, 125, 255, 0.08);
}

.nav-tab-profile.active {
    color: #FF6BAD;
    border-color: rgba(255, 107, 173, 0.4);
    background: rgba(255, 107, 173, 0.08);
}

.nav-tab:active:not(.nav-tab-add) {
    transform: scale(0.92);
    transition: transform 0.1s ease;
}

/* The + New button (visually prominent) */
.nav-tab-add {
    color: rgba(255, 255, 255, 0.5);
    border-color: transparent;
    background: none;
}

.nav-add-btn {
    width: 44px;
    height: 36px;
    border-radius: 14px;
    background: #6BF5A0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.15s ease, background 0.15s ease;
}

.nav-add-btn svg {
    color: #082818;
}

.nav-tab-add:active .nav-add-btn {
    transform: scale(0.9);
    background: #55d888;
}

.nav-tab-add span {
    color: rgba(255, 255, 255, 0.5);
}

/* ============================================ */
/* LOCATION PICKER (for + Add modal) */
/* ============================================ */

.location-picker {
    margin-bottom: 16px;
}

.location-picker-label {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.4);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.location-picker-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 12px 14px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 12px;
    color: #fff;
    font-family: inherit;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
}

.location-picker-btn:hover {
    background: rgba(255, 255, 255, 0.08);
}

.location-picker-btn .location-icon {
    color: rgba(255, 255, 255, 0.4);
    flex-shrink: 0;
}

.location-picker-btn .location-path {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.location-picker-btn .location-chevron {
    color: rgba(255, 255, 255, 0.3);
    flex-shrink: 0;
    transition: transform 0.2s ease;
}

.location-picker-btn.open .location-chevron {
    transform: rotate(180deg);
}

/* Expandable location list */
.location-picker-list {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    margin-top: 0;
}

.location-picker-list.open {
    max-height: 250px;
    overflow-y: auto;
    margin-top: 8px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
}

.location-picker-room {
    padding: 10px 14px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: rgba(255, 255, 255, 0.35);
    background: rgba(255, 255, 255, 0.02);
}

.location-picker-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px 10px 24px;
    font-size: 14px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    transition: background 0.15s ease;
}

.location-picker-item:hover {
    background: rgba(255, 255, 255, 0.05);
}

.location-picker-item.selected {
    color: #C77DFF;
    background: rgba(199, 125, 255, 0.08);
}

.location-picker-item .picker-color-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.location-picker-create {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px 10px 24px;
    font-size: 13px;
    font-weight: 600;
    color: rgba(199, 125, 255, 0.7);
    cursor: pointer;
    transition: background 0.15s ease;
    border-top: 1px solid rgba(255, 255, 255, 0.04);
}

.location-picker-create:hover {
    background: rgba(199, 125, 255, 0.08);
}

.location-picker-create.indent {
    padding-left: 44px;
    border-top: none;
}
