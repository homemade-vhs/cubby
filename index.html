<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0a0a0f">
  <title>Cubby</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>


<body>

  <!-- Home Screen -->
  <div id="home-screen" class="screen active">
    <div class="greeting animate-in">
      <h1 id="greeting-text">Good evening, Matt!</h1>
      <p>What would you like to work on?</p>
    </div>
    <button class="search-btn animate-in delay-1" onclick="openSearchModal()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
      <span>Search tasks...</span>
      <span class="search-shortcut">âŒ˜K</span>
    </button>
    <div id="rooms-container"></div>
    <div class="logo animate-in delay-3"><span>CUBBY</span></div>
  </div>
  
  <!-- Room Screen -->
  <div id="room-screen" class="screen">
    <div class="header animate-in">
      <button class="back-btn" onclick="goToHome()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18L9 12L15 6"/></svg>
        back
      </button>
      <button class="header-search-btn" onclick="openSearchModal()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
      </button>
    </div>
    <div id="room-title" class="room-title animate-in delay-1"></div>
    <div id="cubbies-list" class="cubbies-list"></div>
  </div>
  
  <!-- Cubby Screen -->
  <div id="cubby-screen" class="screen">
    <div class="cubby-header animate-in">
      <button class="back-btn" onclick="goToRoom()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18L9 12L15 6"/></svg>
        back
      </button>
      <button class="header-search-btn" onclick="openSearchModal()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
      </button>
      <button class="new-task-btn" onclick="openModalForFirstSubcubby()">
        <span class="plus">+</span>
        <span class="text">new task</span>
      </button>
    </div>

    <div id="cubby-title" class="cubby-title animate-in delay-1"></div>

    <div id="tasks-container" class="tasks-container"></div>
  </div>

  <!-- 
    Script Loading Order:
    1. app.js - Core data structures, localStorage, navigation, colors (loads data)
    2. animations.js - FLIP animations (no dependencies except app.js variables)
    3. render.js - All render functions (depends on app.js variables)
    4. tasks.js - Task CRUD operations (depends on app.js, render.js, animations.js)
    5. modals.js - Modal handling (depends on app.js, render.js, tasks.js)
    6. menus.js - Kebab menus (depends on all above)
    7. init.js - Initialization (calls renderHome at the end)
  -->
  <script src="app.js"></script>
  <script src="animations.js"></script>
  <script src="render.js"></script>
  <script src="tasks.js"></script>
  <script src="modals.js"></script>
  <script src="menus.js"></script>
  <script src="search.js"></script>
  <script>
    // Initialize the app after all scripts are loaded
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof renderHome === 'function') {
        renderHome();
      }
    });
    // Fallback: if DOMContentLoaded already fired, run immediately
    if (document.readyState !== 'loading') {
      if (typeof renderHome === 'function') {
        renderHome();
      }
    }
  </script>
  
</body>
</html>
